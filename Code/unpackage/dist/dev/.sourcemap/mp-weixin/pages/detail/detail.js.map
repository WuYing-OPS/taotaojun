{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/12770/Documents/HBuilderProjects/TTJ/pages/detail/detail.vue?1cbd","webpack:///C:/Users/12770/Documents/HBuilderProjects/TTJ/pages/detail/detail.vue?74f3","webpack:///C:/Users/12770/Documents/HBuilderProjects/TTJ/pages/detail/detail.vue?a724","webpack:///C:/Users/12770/Documents/HBuilderProjects/TTJ/pages/detail/detail.vue?ede1","uni-app:///pages/detail/detail.vue","webpack:///C:/Users/12770/Documents/HBuilderProjects/TTJ/pages/detail/detail.vue?aaa5","webpack:///C:/Users/12770/Documents/HBuilderProjects/TTJ/pages/detail/detail.vue?8353"],"names":["createPage","Page"],"mappings":"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0BAgJA;AACA;AACA,qBADA;AAEA,yBAFA;AAGA;AACA;AACA;AACA,mCADA;;AAGA;AACA,SATA;;AAWA,KA5JA;AA6JA;AACA,WA9JA,qBA8JA;AACA;AACA;AACA;AACA,uBADA;AAEA,kBAFA;;AAIA;AACA,gCADA;AAEA;AACA,+BADA;AAEA,qCAFA;AAGA,uCAHA;AAIA,uCAJA;AAKA,+CALA;AAMA,iDANA;AAOA,yCAPA;AAQA,wBARA;AASA,qBATA;AAUA,sBAVA;AAWA,qCAXA,EAFA;;AAeA,eAfA,mBAeA,GAfA,EAeA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,iCAFA;;AAIA;AACA;AACA,sCADA;AAEA;AACA,oCADA;AAEA,+CAFA,EAFA;;AAMA,mBANA,mBAMA,GANA,EAMA;AACA;AACA,aARA;;AAUA;AACA;AACA,oCADA;AAEA;AACA,oCADA,EAFA;;AAKA,mBALA,mBAKA,GALA,EAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAHA;AAIA;AACA;AACA,eAVA;AAWA;AACA,aApBA;;AAsBA,SA1DA;;AA4DA,KAjOA;AAkOA;AACA,SAnOA,mBAmOA;AACA;AACA;AACA;AACA,uBADA;AAEA,kBAFA;;AAIA;AACA,6BADA;AAEA;AACA,wDADA;AAEA,gCAFA;AAGA,qCAHA;AAIA,qBAJA;AAKA,0BALA;AAMA,sCANA;AAOA,uCAPA;AAQA,uCARA;AASA,yCATA;AAUA,+CAVA;AAWA,iDAXA;AAYA,uCAZA;AAaA,qCAbA,EAFA;;AAiBA,eAjBA,mBAiBA,GAjBA,EAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,iCAFA;;AAIA;AACA;AACA,sCADA;AAEA;AACA,oCADA;AAEA,+CAFA,EAFA;;AAMA,mBANA,mBAMA,GANA,EAMA;AACA;AACA,aARA;;AAUA;AACA;AACA,oCADA;AAEA;AACA,oCADA,EAFA;;AAKA,mBALA,mBAKA,GALA,EAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAHA;AAIA;AACA;AACA,eAVA;AAWA;AACA,aApBA;;;AAuBA,SA/DA;;AAiEA;AACA;AACA;AACA,yCADA;AAEA;AACA,oCADA,EAFA;;AAKA,YALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA,gDADA;AAEA;AACA,8DADA;AAEA,wCAFA;AAGA,qCAHA;AAIA,0CAJA;AAKA,qDALA;AAMA,uDANA;AAOA,2CAPA;AAQA,2BARA,EAFA;;AAYA,gBAZA,CAYA;AACA;AACA;AACA;AACA;AACA;AACA,aAlBA;AAmBA,WAtBA,MAsBA;AACA;AACA,wCADA;AAEA;AACA,8DADA;AAEA,wCAFA;AAGA,qCAHA;AAIA,0CAJA;AAKA,qDALA;AAMA,uDANA;AAOA,2BAPA;AAQA,2CARA,EAFA;;AAYA,gBAZA,CAYA;AACA;AACA;AACA;AACA;AACA,aAjBA;AAkBA;AACA,SAjDA;;AAmDA;AACA,KAjWA;AAkWA;AACA,iBAnWA,yBAmWA,WAnWA,EAmWA;AACA;AACA;AACA;AACA,uBADA;AAEA,6BAFA;AAGA,iBAHA,mBAGA,CAHA,EAGA;AACA;AACA;AACA,qCADA;;AAGA;AACA,WATA;;AAWA,OAZA,MAYA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA,KAjYA;AAkYA,eAlYA,uBAkYA,KAlYA,EAkYA,KAlYA,EAkYA,WAlYA,EAkYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA;AACA,gCADA;AAEA,oCAFA,EAFA;;AAMA,iBANA,mBAMA,GANA,EAMA;AACA;AACA;AACA,WATA;;AAWA;AACA,KAxZA;AAyZA,iBAzZA,yBAyZA,WAzZA,EAyZA,KAzZA,EAyZA,WAzZA,EAyZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApaA;AAqaA,cAraA,wBAqaA;AACA;AACA;AACA,KAxaA;AAyaA;AACA,kBA1aA,0BA0aA,IA1aA,EA0aA;AACA;AACA,4BADA;AAEA;AACA,+BADA;AAEA,sCAFA,EAFA;;AAMA,UANA,CAMA;AACA;AACA;AACA;AACA,OAVA;AAWA,KAtbA,EA/BA;;AAudA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,2BAFA;;AAIA;AACA,yBADA;AAEA;AACA,8BADA;AAEA,oCAFA,EAFA;;;AAOA;AACA;AACA,8BADA;AAEA;AACA,8BADA,EAFA;;AAKA,aALA,mBAKA,GALA,EAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA;AAIA;AACA;AACA,SAVA;AAWA;AACA,OApBA;;;;AAwBA,GAtgBA;AAugBA;AACA,SAxgBA,qBAwgBA;AACA;AACA;AACA,mBADA;AAEA,aAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA;;AAUA;AACA,aADA,mBACA,GADA,EACA;AACA;AACA,OAHA;;AAKA,GAzhBA;AA0hBA,UA1hBA,sBA0hBA;AACA;AACA;AACA,GA7hBA;AA8hBA;AACA,mBA/hBA,+BA+hBA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA;AACA,8BADA,EAFA;;AAKA,QALA,CAKA;AACA;AACA;AACA;AACA,KATA;AAUA,GA7iBA,E;;;;;;;;;;;;;ACtJA;AAAA;AAAA;AAAA;AAAkmC,CAAgB,4kCAAG,EAAC,C;;;;;;;;;;;ACAtnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/detail/detail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=3e159eb4&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/detail/detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=3e159eb4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"cu-custom \">\r\n\t\t\t<cu-custom :isBack=\"true\" bgColor=\"bg-gradual-orange\">\r\n\t\t\t\t<block slot=\"backText\">返回</block>\r\n\t\t\t\t<block slot=\"content\">详情</block>\r\n\t\t\t</cu-custom>\r\n\t\t</view>\r\n\t\t<!-- 头部 -->\r\n\t\t<view class=\"cu-list menu-avatar\">\r\n\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t<view class=\"cu-avatar round lg\" :style=\"{backgroundImage:`url(${detail.avatarUrl})`}\"></view>\r\n\t\t\t\t<view class=\"content flex-sub\">\r\n\t\t\t\t\t<view>{{detail.nickName}}</view>\r\n\t\t\t\t\t<view class=\"text-gray text-sm flex\">\r\n\t\t\t\t\t\t<text class=\"margin-right-sm\">{{detail.ctime}}</text>\r\n\t\t\t\t\t\t<text class=\"cuIcon-attentionfill margin-lr-sm\"> {{detail.views}}</text>\r\n\t\t\t\t\t\t<text class=\"cuIcon-messagefill margin-lr-sm\">{{commentsCount}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-list grid\" v-if=\"detail.openid!==clickOpenid && login\" @click=\"saveStore(detail._id,detail.openid)\">\r\n\t\t\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t\t\t<text class=\"lg text-orange\" :class=\"isSave?'cuIcon-favorfill':'cuIcon-favor'\"></text>\r\n\t\t\t\t\t\t<text>收藏</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 轮播 -->\r\n\t\t<!-- 轮播图 -->\r\n\t\t<view class=\"margin-top-sm\">\r\n\t\t\t<swiper class=\"screen-swiper square-dot \" :indicator-dots=\"true\" :circular=\"true\" :autoplay=\"false\" interval=\"5000\"\r\n\t\t\t duration=\"500\">\r\n\t\t\t\t<swiper-item v-for=\"(item,index) in detail.imgList\" :key=\"index\" @tap=\"handlePreviewImg\" :data-url=\"item\">\r\n\t\t\t\t\t<image :src=\"item\" mode=\"aspectFill\"></image>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<!-- 描述 -->\r\n\t\t<view class=\"cu-list  bg-white padding-bottom-xs\">\r\n\t\t\t<view class=\"cu-item\">\r\n\t\t\t\t<view class=\"content margin-lr-xs\">\r\n\t\t\t\t\t<view class=\"text-orange text-lg \">￥{{detail.price}}</view>\r\n\t\t\t\t\t<view class=\"text-black text-lg \">\r\n\t\t\t\t\t\t{{detail.title}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-orange text-sm margin-top-sm\">\r\n\t\t\t\t\t\t#{{detail.classify}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-abc text-sm \">\r\n\t\t\t\t\t\t{{detail.description}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 联系 -->\r\n\t\t<form>\r\n\t\t\t<view class=\"cu-form-group margin-top-sm\">\r\n\t\t\t\t<view class=\"title\">联系人</view>\r\n\t\t\t\t<input v-if=\"login\" :value=\"detail.connection\" name=\"input\" disabled></input>\r\n\t\t\t\t<input v-else value=\"***\" name=\"input\" disabled></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"title\">联系人手机</view>\r\n\t\t\t\t<input v-if=\"login\" :value=\"detail.phone\" name=\"input\" disabled @click=\"makePhoneCall(detail.phone)\"></input>\r\n\t\t\t\t<input v-else value=\"***\" name=\"input\" disabled></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group special\">\r\n\t\t\t\t<view class=\"title\">联系微信</view>\r\n\t\t\t\t<text v-if=\"login\" selectable :data-weixin=\"detail.weixin\" @click=\"setClipboardData\">{{detail.weixin}}</text>\r\n\t\t\t\t<input v-else value=\"***\" name=\"input\" disabled></input>\r\n\t\t\t</view>\r\n\t\t</form>\r\n\t\t<!-- 问答区 -->\r\n\t\t<view class=\"margin-bottom-xl padding-bottom-xl\">\r\n\t\t\t<view class=\"comments-count margin-top-sm \">\r\n\t\t\t\t<text>问答区({{commentsCount}})</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 评论列表 -->\r\n\t\t\t<view class=\" bg-white \" style=\"overflow-x: hidden\">\r\n\t\t\t\t<view class=\" msg padding-sm\" v-for=\"comments in comment\" :key=\"comments._id\" style=\"border-bottom: 1px solid #F1F1F1;\">\r\n\t\t\t\t\t<view class=\"  msg padding-left-sm flex\" @click=\"clickParent(`${comments.clickNickName}`,`${comments.ctime}`,`${comments.clickOpenid}`)\">\r\n\t\t\t\t\t\t<view class=\" padding-top-xs\">\r\n\t\t\t\t\t\t\t<image :src=\"comments.clickAvatarUrl\" mode=\"\" class=\"cu-avatar round lg\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\" msg-conetent margin-left-sm\">\r\n\t\t\t\t\t\t\t<view class=\" flex justify-between padding-xs\">\r\n\t\t\t\t\t\t\t\t<view class=\"nickname\">\r\n\t\t\t\t\t\t\t\t\t{{comments.clickNickName}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\" msg-timers  margin-right-sm\"> {{comments.newTime}}</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"pinglun padding-right-xs\">\r\n\t\t\t\t\t\t\t\t{{comments.commentValue}}\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 回复表  -->\r\n\t\t\t\t\t<view class=\" msg margin-left-xl padding-left-xl flex padding-bottom-xs padding-top-xs\" v-for=\"childrenComment in comments.children\"\r\n\t\t\t\t\t :key=\"childrenComment._id\" @click=\"clickChildren(`${childrenComment.question_id}`,`${childrenComment.replyNickName}`,`${childrenComment.replyOpenID}`)\">\r\n\t\t\t\t\t\t<view class=\" padding-top-xs\">\r\n\t\t\t\t\t\t\t<image :src=\"childrenComment.replyAvatarUrl\" mode=\"\" class=\"cu-avatar round lg\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\" msg-conetent margin-left-sm\">\r\n\t\t\t\t\t\t\t<view class=\" flex justify-between padding-xs\">\r\n\t\t\t\t\t\t\t\t<view class=\"nickname\">\r\n\t\t\t\t\t\t\t\t\t{{childrenComment.replyNickName}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\" msg-timers \"> {{childrenComment.newTime}}</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"pinglun padding-right-sm\">\r\n\t\t\t\t\t\t\t\t<text class=\"padding-right-sm text-orange\">@{{ childrenComment.clickNickName }}</text>{{childrenComment.replyContent}}\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t\t<!-- 输入操作条 -->\r\n\t\t<view class=\"box\">\r\n\t\t\t<view class=\"cu-bar input\" style=\"position: fixed;bottom: 0;width: 100%;\">\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t<text class=\"text-orange\" v-if=\"!login\" @click=\"confirmLogin\">请登录</text>\r\n\t\t\t\t\t<text v-if=\"peopleClick\">@{{ name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<input :adjust-position=\"false\" class=\"solid-bottom\" maxlength=\"300\" cursor-spacing=\"10\" adjust-position v-model=\"commentValue\"></input>\r\n\t\t\t\t<button class=\"cu-btn bg-green shadow-blur\" @click=\"submitComment(peopleClick)\">\r\n\t\t\t\t\t<text v-if=\"peopleClick\">回复</text>\r\n\t\t\t\t\t<text v-else>评论</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t<text class=\"cuIcon-roundclose text-grey\" v-if=\"peopleClick\" @click=\"cancelIcon\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<l-message />\r\n\t\t<view class='goTop' @click=\"goTop\">\r\n\t\t\t<image src='https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-l5j2urmfatyb41ea37/580b4200-2728-11eb-b680-7980c8a877b8.png'\r\n\t\t\t v-if=\"!showTop\"></image>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowTop: true, //火箭\r\n\t\t\t\tlogin: false,\r\n\t\t\t\tpeopleClick: false,\r\n\t\t\t\tInputBottom: 0,\r\n\t\t\t\tname: '',\r\n\t\t\t\tcommentsCount: 0, //评论数\r\n\t\t\t\tviews: 0, //浏览数\r\n\t\t\t\tisSave: false,\r\n\t\t\t\tswiperList: [\r\n\t\t\t\t\t'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-l5j2urmfatyb41ea37/14882c30-2680-11eb-bd01-97bc1429a9ff.jpg',\r\n\t\t\t\t\t'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-l5j2urmfatyb41ea37/13f031f0-2680-11eb-899d-733ae62bed2f.jpg',\r\n\t\t\t\t\t'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-l5j2urmfatyb41ea37/12e3a3f0-2680-11eb-bd01-97bc1429a9ff.jpg'\r\n\t\t\t\t],\r\n\t\t\t\totherOpenid: '',\r\n\t\t\t\tcomment: '', //评论列表\r\n\t\t\t\tdetail: '', //用户传递过来的详情信息\r\n\t\t\t\tstoreID: '',\r\n\t\t\t\tstoreTitle: '',\r\n\t\t\t\tstoreOpenID: '',\r\n\t\t\t\tclickOpenid: '',\r\n\t\t\t\tuserInfo: '',\r\n\t\t\t\tcommentValue: '',\r\n\t\t\t\tname: '',\r\n\t\t\t\tquestionID: '',\r\n\t\t\t\tclickName: '',\r\n\t\t\t\tpullDownLimit: 5\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 点击回到顶部\r\n\t\t\tonPageScroll(e) {\r\n\t\t\t\t// this.scrollTop = e.scrollTop\r\n\t\t\t\tif (e.scrollTop > 500) {\r\n\t\t\t\t\tthis.showTop = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showTop = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgoTop() {\r\n\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\tscrollTop: 0,\r\n\t\t\t\t\tduration: 300\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 轮播图预览图片\r\n\t\t\thandlePreviewImg(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url,\r\n\t\t\t\t\turls:this.detail.imgList,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 点击长按复制\r\n\t\t\tsetClipboardData(e){\r\n\t\t\t\tuni.setClipboardData({\r\n\t\t\t\t    data: e.currentTarget.dataset.weixin\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 点击收藏商品\r\n\t\t\tasync saveStore(storeid, storeOpenid) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tlet timer\r\n\t\t\t\tclearTimeout(timer)\r\n\t\t\t\tthat.isSave = !that.isSave\r\n\t\t\t\tif (that.isSave) {\r\n\t\t\t\t\ttimer = await setTimeout(function() {\r\n\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\tname: 'addStoreSave',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tstoreId: storeid,\r\n\t\t\t\t\t\t\t\tstoreOpendId: storeOpenid,\r\n\t\t\t\t\t\t\t\tuserOpenid: that.clickOpenid,\r\n\t\t\t\t\t\t\t\tsave: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tconsole.log(\"收藏成功\", res)\r\n\t\t\t\t\t\t\t// 得到用户收藏商品的总数哦\r\n\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\tname: 'getAllStoreSave',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\topenid: that.clickOpenid\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tuni.$emit('changeSaveCount', res.result.data.length)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttimer = await setTimeout(function() {\r\n\t\t\t\t\t\t// console.log(\"取消收藏\")\r\n\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\tname: 'deleteStoreSave',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tstoreId: storeid,\r\n\t\t\t\t\t\t\t\tuserOpenid: that.clickOpenid\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\tname: 'getAllStoreSave',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\topenid: that.clickOpenid\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tlet store = []\r\n\t\t\t\t\t\t\t\tconsole.log(\"收藏的商品\", res.result.data)\r\n\t\t\t\t\t\t\t\tif (res.result.data.length === 0) {\r\n\t\t\t\t\t\t\t\t\tuni.$emit('getAllSave', \"\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// 获取到收藏的总数\r\n\t\t\t\t\t\t\t\tuni.$emit('changeSaveCount', res.result.data.length)\r\n\t\t\t\t\t\t\t\tres.result.data.forEach(async (el, index) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(el.storeId)\r\n\t\t\t\t\t\t\t\t\tawait uniCloud.callFunction({\r\n\t\t\t\t\t\t\t\t\t\tname: 'getStoreDetail',\r\n\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\tstore_id: el.storeId\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}).then(RES => {\r\n\t\t\t\t\t\t\t\t\t\tstore.push(RES.result.data[0])\r\n\t\t\t\t\t\t\t\t\t\tif (store.length === res.result.data.length) {\r\n\t\t\t\t\t\t\t\t\t\t\t// that.handleTime(store)\r\n\t\t\t\t\t\t\t\t\t\t\tuni.$emit('getAllSave', store)\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t}\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\t// 拨打电话撒\r\n\t\t\tmakePhoneCall(phone) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '确定拨打电话吗？',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.makePhoneCall({\r\n\t\t\t\t\t\t\t\tphoneNumber: phone //仅为示例\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 对获取到的数据进行时间的处理\r\n\t\t\tgetTime(shijianchuo) {\r\n\t\t\t\tvar date = new Date(shijianchuo); //时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n\t\t\t\tvar Y = date.getFullYear() + '-';\r\n\t\t\t\tvar M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\r\n\t\t\t\tvar D = date.getDate() + ' ';\r\n\t\t\t\tvar h = date.getHours() + ':';\r\n\t\t\t\tvar m = date.getMinutes() < 10 ? '0' + date.getMinutes() + ':' : date.getMinutes() + ':';\r\n\t\t\t\tvar s = date.getSeconds();\r\n\t\t\t\treturn Y + M + D + h + m + s;\r\n\t\t\t},\r\n\t\t\thandleTime(context) {\r\n\t\t\t\tlet newTime = this.getTime(context.ctime)\r\n\t\t\t\tcontext.ctime = newTime\r\n\t\t\t\tthis.detail = context\r\n\t\t\t\tthis.commentsCount = this.detail.commentsCount\r\n\t\t\t\tconsole.log(\"detail\", this.detail)\r\n\t\t\t},\r\n\t\t\t// 对信息的提示\r\n\t\t\twxShowMessage(type, icon, content) {\r\n\t\t\t\twx.lin.showMessage({\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\ticon: icon,\r\n\t\t\t\t\tcontent: content\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点击请登录跳转登录页面\r\n\t\t\tconfirmLogin() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\tcontent: '确定登陆吗？',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 评论\r\n\t\t\tdiscuss() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconsole.log(\"评论\")\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '评论中...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'addQuestionTable',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstoreID: that.storeID,\r\n\t\t\t\t\t\tstoreTitle: that.storeTitle,\r\n\t\t\t\t\t\tstoreOpenID: that.storeOpenID,\r\n\t\t\t\t\t\tclickOpenid: that.clickOpenid,\r\n\t\t\t\t\t\tclickNickName: that.userInfo.nickName,\r\n\t\t\t\t\t\tclickAvatarUrl: that.userInfo.avatarUrl,\r\n\t\t\t\t\t\tcommentValue: that.commentValue,\r\n\t\t\t\t\t\tisParent: true,\r\n\t\t\t\t\t\tread: false,\r\n\t\t\t\t\t\tchildren: [],\r\n\t\t\t\t\t\tctime: new Date().getTime()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tthat.wxShowMessage(\"success\", \"success\", \"评论成功\")\r\n\t\t\t\t\t\tthat.commentsCount += 1\r\n\t\t\t\t\t\tthat.commentValue = ''\r\n\t\t\t\t\t\tuni.$emit('changeComemntCount', {\r\n\t\t\t\t\t\t\tCount: that.commentsCount,\r\n\t\t\t\t\t\t\tstoreId: that.storeID\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 更改商品列表的评论数量\r\n\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\tname: 'updateCommentCount',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tstore_id: that.storeID,\r\n\t\t\t\t\t\t\t\tcommentsCount: that.commentsCount\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"更改CommentCount\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 重新渲染评论列表\r\n\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\tname: 'getQuestionTable',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tstore_id: that.storeID,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t// 对时间进行处理\r\n\t\t\t\t\t\t\t\tlet newData = []\r\n\t\t\t\t\t\t\t\tres.result.data.forEach((el) => {\r\n\t\t\t\t\t\t\t\t\tlet newTime = that.getTime(el.ctime)\r\n\t\t\t\t\t\t\t\t\tel.newTime = newTime\r\n\t\t\t\t\t\t\t\t\tif (el.children) {\r\n\t\t\t\t\t\t\t\t\t\tel.children.forEach(el => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet childrenNewTime = that.getTime(el.ctime)\r\n\t\t\t\t\t\t\t\t\t\t\tel.newTime = childrenNewTime\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tnewData.push(el)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.comment = newData\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 回复\r\n\t\t\treply() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconsole.log(\"回复\", that.otherOpenid, that.commentValue)\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '回复中...',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'addReplyTable',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t_id: Math.floor(Math.random() * 10 + 10000000),\r\n\t\t\t\t\t\tstore_id: that.storeID,\r\n\t\t\t\t\t\tstoreTitle: that.storeTitle,\r\n\t\t\t\t\t\tread: false,\r\n\t\t\t\t\t\tisChildren: true,\r\n\t\t\t\t\t\tquestion_id: that.questionID,\r\n\t\t\t\t\t\tstoreOpenID: that.storeOpenID,\r\n\t\t\t\t\t\treplyOpenID: that.clickOpenid,\r\n\t\t\t\t\t\treplyContent: that.commentValue,\r\n\t\t\t\t\t\treplyNickName: that.userInfo.nickName,\r\n\t\t\t\t\t\treplyAvatarUrl: that.userInfo.avatarUrl,\r\n\t\t\t\t\t\tclickNickName: that.clickName,\r\n\t\t\t\t\t\tctime: new Date().getTime()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (that.storeOpenID === that.otherOpenid){\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tthat.wxShowMessage(\"success\", \"success\", \"回复成功\")\r\n\t\t\t\t\t\t\tthat.commentValue = ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.commentsCount += 1\r\n\t\t\t\t\t\tuni.$emit('changeComemntCount', {\r\n\t\t\t\t\t\t\tCount: that.commentsCount,\r\n\t\t\t\t\t\t\tstoreId: that.storeID\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 更改商品列表的评论数量\r\n\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\tname: 'updateCommentCount',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tstore_id: that.storeID,\r\n\t\t\t\t\t\t\t\tcommentsCount: that.commentsCount\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"更改CommentCount\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 重新渲染评论列表\r\n\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\tname: 'getQuestionTable',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tstore_id: that.storeID,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t// 对时间进行处理\r\n\t\t\t\t\t\t\t\tlet newData = []\r\n\t\t\t\t\t\t\t\tres.result.data.forEach((el) => {\r\n\t\t\t\t\t\t\t\t\tlet newTime = that.getTime(el.ctime)\r\n\t\t\t\t\t\t\t\t\tel.newTime = newTime\r\n\t\t\t\t\t\t\t\t\tif (el.children) {\r\n\t\t\t\t\t\t\t\t\t\tel.children.forEach(el => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet childrenNewTime = that.getTime(el.ctime)\r\n\t\t\t\t\t\t\t\t\t\t\tel.newTime = childrenNewTime\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tnewData.push(el)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.comment = newData\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (that.storeOpenID !== that.otherOpenid) {\r\n\t\t\t\t\tconsole.log(\"不相同\", that.storeOpenID, that.clickOpenid, that.commentValue)\r\n\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'getOtherCommentByOpenid',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\topenid: that.otherOpenid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(\"otherOpenid\", res, that.commentValue, res.result.data.length)\r\n\t\t\t\t\t\tif (res.result.data.length != 0) {\r\n\t\t\t\t\t\t\tconsole.log(\"that.commentValue\", that.commentValue, that.storeID)\r\n\t\t\t\t\t\t\t// 更新otherComment\r\n\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\tname: 'updateOtherCommentByOPenid',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t_id:Math.floor(Math.random() * 10 + 10000000),\r\n\t\t\t\t\t\t\t\t\topenid: that.otherOpenid,\r\n\t\t\t\t\t\t\t\t\tstoreId: that.storeID,\r\n\t\t\t\t\t\t\t\t\tcomment: that.commentValue,\r\n\t\t\t\t\t\t\t\t\treplyNickName: that.userInfo.nickName,\r\n\t\t\t\t\t\t\t\t\treplyAvatarUrl: that.userInfo.avatarUrl,\r\n\t\t\t\t\t\t\t\t\tctime: new Date().getTime(),\r\n\t\t\t\t\t\t\t\t\tread:false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"修改otherComment成功\", res)\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tthat.wxShowMessage(\"success\", \"success\", \"回复成功\")\r\n\t\t\t\t\t\t\t\tthat.commentValue = ''\r\n\t\t\t\t\t\t\t\tconsole.log(that.otherOpenid, that.storeID, that.commentValue, that.userInfo.nickName, that.userInfo.avatarUrl)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\tname: 'addOtherReplyTable',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t_id:Math.floor(Math.random() * 10 + 10000000),\r\n\t\t\t\t\t\t\t\t\topenid: that.otherOpenid,\r\n\t\t\t\t\t\t\t\t\tstoreID: that.storeID,\r\n\t\t\t\t\t\t\t\t\tcomment: that.commentValue,\r\n\t\t\t\t\t\t\t\t\treplyNickName: that.userInfo.nickName,\r\n\t\t\t\t\t\t\t\t\treplyAvatarUrl: that.userInfo.avatarUrl,\r\n\t\t\t\t\t\t\t\t\tread:false,\r\n\t\t\t\t\t\t\t\t\tctime: new Date().getTime()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tthat.wxShowMessage(\"success\", \"success\", \"回复成功\")\r\n\t\t\t\t\t\t\t\tthat.commentValue = ''\r\n\t\t\t\t\t\t\t\tconsole.log(res, \"别人的评论成功\")\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 评论 OR 回复\r\n\t\t\tsubmitComment(peopleClick) {\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tif (!this.login) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: \"温馨提示\",\r\n\t\t\t\t\t\tcontent: '点击前往登录页面',\r\n\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (this.login) {\r\n\t\t\t\t\tthat.commentValue = that.commentValue.replace(/(^\\s*)|(\\s*$)/g, \"\")\r\n\t\t\t\t\t// 判断有没有输入内容\r\n\t\t\t\t\tif (!that.commentValue) {\r\n\t\t\t\t\t\tthat.wxShowMessage(\"error\", \"error\", \"评论/回复的内容不能为空\")\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 判断是评论还是回复\r\n\t\t\t\t\t\tif (peopleClick) {\r\n\t\t\t\t\t\t\t// 回复\r\n\t\t\t\t\t\t\tthat.reply()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 评论\r\n\t\t\t\t\t\t\tthat.discuss()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclickParent(Pname, ctime, clickOpenid) {\r\n\t\t\t\tconsole.log(Pname, ctime, clickOpenid)\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconsole.log()\r\n\t\t\t\tthat.otherOpenid = clickOpenid\r\n\t\t\t\tconsole.log(\"clickParent\", that.storeOpenID, that.clickOpenid)\r\n\t\t\t\tif (that.login && clickOpenid != that.clickOpenid) {\r\n\t\t\t\t\tconsole.log(ctime, clickOpenid)\r\n\t\t\t\t\tthat.peopleClick = true\r\n\t\t\t\t\tthat.name = Pname\r\n\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'getQuestionId',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tctime: Number(ctime),\r\n\t\t\t\t\t\t\tclickOpenid: clickOpenid\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tthat.questionID = res.result.data[0]._id\r\n\t\t\t\t\t\t\tthat.clickName = Pname\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclickChildren(question_id, Cname, replyOpenID) {\r\n\t\t\t\tconsole.log(question_id, Cname, replyOpenID)\r\n\t\t\t\tconst that = this\r\n\t\t\t\tthat.otherOpenid = replyOpenID\r\n\t\t\t\tconsole.log(\"clickChildren\", that.storeOpenID, that.clickOpenid)\r\n\t\t\t\tif (that.login && replyOpenID != that.clickOpenid) {\r\n\t\t\t\t\tthat.peopleClick = true\r\n\t\t\t\t\tthat.name = Cname\r\n\t\t\t\t\tthat.questionID = question_id\r\n\t\t\t\t\tthat.clickName = Cname\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcancelIcon() {\r\n\t\t\t\tthis.name = ''\r\n\t\t\t\tthis.peopleClick = false\r\n\t\t\t},\r\n\t\t\t// 获取该商品是否是收藏的\r\n\t\t\tjudgeStoreSave(that) {\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'getStoreSave',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstoreID: that.storeID,\r\n\t\t\t\t\t\tuserOpenid: that.clickOpenid\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.result.data.length != 0) {\r\n\t\t\t\t\t\tthat.isSave = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\t// 接收商品的个人信息\r\n\t\tonLoad: function(option) {\r\n\t\t\tconsole.log(\"onload\")\r\n\t\t\tconst that = this\r\n\t\t\tlet data = JSON.parse(decodeURIComponent(option.data))\r\n\t\t\tconsole.log(\"data\", data)\r\n\t\t\tthis.storeID = data._id\r\n\t\t\tthis.storeOpenID = data.openid\r\n\t\t\tthis.storeTitle = data.title\r\n\t\t\tthis.views = data.views + 1\r\n\t\t\tthis.handleTime(data)\r\n\t\t\tuni.$emit('changeViews', {\r\n\t\t\t\tviews: that.views,\r\n\t\t\t\tstoreId: that.storeID\r\n\t\t\t})\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'updateViews',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tstore_id: that.storeID,\r\n\t\t\t\t\tviews: that.detail.views + 1\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 获取评论列表\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'getQuestionTable',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tstore_id: that.storeID\r\n\t\t\t\t},\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t// 对时间进行处理   \r\n\t\t\t\t\tlet newData = []\r\n\t\t\t\t\tres.result.data.forEach((el) => {\r\n\t\t\t\t\t\tlet newTime = that.getTime(el.ctime)\r\n\t\t\t\t\t\tel.newTime = newTime\r\n\t\t\t\t\t\tif (el.children) {\r\n\t\t\t\t\t\t\tel.children.forEach(el => {\r\n\t\t\t\t\t\t\t\tlet childrenNewTime = that.getTime(el.ctime)\r\n\t\t\t\t\t\t\t\tel.newTime = childrenNewTime\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewData.push(el)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthat.comment = newData\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\r\n\t\t},\r\n\t\t// 判断有无openid，有就代表已经登录过了\r\n\t\tcreated() {\r\n\t\t\tconst that = this\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey: 'openid',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tthat.clickOpenid = res.data\r\n\t\t\t\t\tthat.login = true\r\n\t\t\t\t\tconsole.log(\"that.clickOpenid\", that.clickOpenid)\r\n\t\t\t\t\t// 获取该商品是否是收藏的\r\n\t\t\t\t\tthat.judgeStoreSave(that)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tuni.getUserInfo({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tthat.userInfo = res.userInfo\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tuni.$off(\"views\")\r\n\t\t\tuni.$off(\"clickOpenid\")\r\n\t\t},\r\n\t\t// 下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tconst that = this\r\n\t\t\t// 获取该商品是否是收藏的\r\n\t\t\tthat.judgeStoreSave(that)\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'getStoreDetail',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tstore_id: that.storeID\r\n\t\t\t\t}\r\n\t\t\t}).then(res => {\r\n\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\tthis.handleTime(res.result.data[0])\r\n\t\t\t\tthat.commentValue = res.result.data[0].commentValue\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.cu-list.grid>.cu-item [class*=cuIcon] {\r\n\t\tcolor: orange;\r\n\t}\r\n\r\n\t.cu-form-group {\r\n\t\tmin-height: 80rpx;\r\n\t}\r\n\r\n\t.comments-count {\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tpadding: 19rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tborder-bottom: 1px solid #bcbcbc;\r\n\r\n\t\ttext {\r\n\t\t\tcolor: #003200;\r\n\t\t\tborder-left: 3px solid orange;\r\n\t\t\tpadding-left: 30rpx;\r\n\t\t\tborder-radius: 3rpx;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t.margin-bottom-xl {\r\n\t\tmargin-bottom: 60rpx;\r\n\t}\r\n\r\n\t.margin-left-sm {\r\n\t\twidth: 600rpx;\r\n\t}\r\n\r\n\t.nickname {\r\n\t\twidth: 43%;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.pinglun {\r\n\t\twidth: 100%;\r\n\t\tline-height: 32rpx;\r\n\t}\r\n\r\n\t.cu-custom .cu-bar {\r\n\t\tz-index: 500;\r\n\t}\r\n\r\n\t.cu-bar.fixed,\r\n\t.nav.fixed {\r\n\t\tz-index: 500;\r\n\t}\r\n\r\n\t.cu-form-group.special {\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608014567523\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}